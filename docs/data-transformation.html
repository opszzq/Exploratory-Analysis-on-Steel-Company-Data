<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Exploratory Analysis on Steel Company Data</title>
  <meta name="description" content="Chapter 3 Data transformation | Exploratory Analysis on Steel Company Data" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Exploratory Analysis on Steel Company Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Exploratory Analysis on Steel Company Data" />
  
  
  

<meta name="author" content="Kyungjin Kim" />


<meta name="date" content="2021-04-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploratory Analysis on Steel Company Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a><ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#financial-data"><i class="fa fa-check"></i><b>2.1</b> Financial Data</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#stock-data"><i class="fa fa-check"></i><b>2.2</b> Stock Data</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#nickel-data"><i class="fa fa-check"></i><b>2.3</b> Nickel Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#financial-data-1"><i class="fa fa-check"></i><b>3.1</b> Financial Data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#stock-data-1"><i class="fa fa-check"></i><b>3.2</b> Stock Data</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#nickel-data-1"><i class="fa fa-check"></i><b>3.3</b> Nickel Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a><ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#handle-missing-values-in-financial-data"><i class="fa fa-check"></i><b>4.1</b> Handle missing values in financial data</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#handle-missing-values-in-mineral-datanickel"><i class="fa fa-check"></i><b>4.2</b> Handle missing values in mineral data(nickel)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#yearly-trend-in-asset-equity-and-liability"><i class="fa fa-check"></i><b>5.1</b> Yearly Trend in asset, equity and liability</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#yearly-trend-in-revenue-gross-profit-and-profit"><i class="fa fa-check"></i><b>5.2</b> Yearly Trend in Revenue, Gross Profit and Profit</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#company-revenue-based-on-product-proportion"><i class="fa fa-check"></i><b>5.3</b> Company Revenue based on product proportion</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#profitability-indicator"><i class="fa fa-check"></i><b>5.4</b> Profitability Indicator</a></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#debt-repayment-ability-indicator"><i class="fa fa-check"></i><b>5.5</b> Debt Repayment Ability Indicator</a></li>
<li class="chapter" data-level="5.6" data-path="results.html"><a href="results.html#stock-price-analysis"><i class="fa fa-check"></i><b>5.6</b> Stock Price Analysis</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploratory Analysis on Steel Company Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="financial-data-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Financial Data</h2>
<p>As briefly explained from part 2, data acquisition of company financial data
was done by python package. It was saved in xlsx format and can be imported as
data frame format in R library. Code for the financial data acquisition is represented below.</p>
<pre><code>#dart_fss package

import dart_fss as dart

# get api_key to access to database

api_key =&#39;private_api_from_user&#39;
dart.set_api_key(api_key=api_key)

# reference consolidate financial data

crp_list = dart.get_corp_list()
hwangkum = crp_list.find_by_corp_code(&#39;032560&#39;)

# set begin date to collect data from begin date

fs= dart.fs.extract(corp_code = &#39;032560&#39;, bgn_de = &#39;19990101&#39;)

# save it in local directory

fs.save()
</code></pre>
</div>
<div id="stock-data-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Stock Data</h2>
<p>Same as financial data acquisition, stock data were crawled from web through below code
and saved as csv format. It can be imported as data farme in R as well.</p>
<p>KOSPI Index Web Crawling</p>
<pre><code># KOSPI INDEX 

import requests
import pandas as pd
import re

# 5593 stands for date from (20000101 to present)

count = &#39;5993&#39;
url2 = f&#39;https://fchart.stock.naver.com/siseJson.nhn?symbol=KOSPI&amp;requestType=2&amp;count={count}&amp;startTime=20210407&amp;timeframe=day&#39;
# request data from url
rs = requests.get(url2)

# data tokenization and remove space

s = rs.text[3:-2]
s = s.replace(&quot; &quot;, &quot;&quot;)

# use regrex module to extract data in &quot;[]&quot;

p = re.compile(r&quot;\[(.+)\]&quot;)
s = p.findall(s)

# split extracted data and store it into list in order

kospi_template = []
for i in range(1, len(s)):
    token = s[i]
    each_token = token.split(&#39;,&#39;)
    final_each_token = []
    for j in range(7):
        final_each_token.append(each_token[j])

    kospi_template.append(final_each_token)

# data consists of [&#39;date&#39;, &#39;open&#39;, &#39;high&#39;, &#39;low&#39;, &#39;close&#39;, &#39;volume&#39;, &quot;foreign&quot;]

kospi_index = pd.DataFrame(kospi_template)
kospi_index.columns = [&#39;date&#39;, &#39;open&#39;, &#39;high&#39;, &#39;low&#39;, &#39;close&#39;, &#39;volume&#39;, &quot;foreign&quot;]
kospi_index[[&#39;open&#39;, &#39;high&#39;, &#39;low&#39;, &#39;close&#39;, &#39;volume&#39;]] = kospi_index[[&#39;open&#39;, &#39;high&#39;, &#39;low&#39;, &#39;close&#39;, &#39;volume&#39;]].applymap(lambda x : float(x))

# export as csv file to local directory

file_name = &#39;Kospi_index.csv&#39;
kospi_index.to_csv(file_name, encoding = &#39;euc-kr&#39;, index =False)</code></pre>
<p>Company stock data web crawling</p>
<pre><code>import requests
import pandas as pd
import json
import xmltodict

# find company stock data from web

stockcode = &#39;032560&#39;
count = &#39;5993&#39;
url = f&#39;https://fchart.stock.naver.com/sise.nhn?symbol={stockcode}&amp;timeframe=day&amp;count={count}&amp;requestType=0&#39;

# put into json file for easy data handling

rs = requests.get(url)
dt = xmltodict.parse(rs.text)
js = json.dumps(dt, indent=4)
js = json.loads(js)

# extract data from json file and store it with followed column name

data = pd.json_normalize(js[&#39;protocol&#39;][&#39;chartdata&#39;][&#39;item&#39;])
df = data[&#39;@data&#39;].str.split(&#39;|&#39;, expand = True)
df.columns = [&#39;date&#39;, &#39;open&#39;, &#39;high&#39;, &#39;low&#39;, &#39;close&#39;, &#39;volume&#39;]

# export to csv file and save in local directory

file_name = &#39;hkSteel.csv&#39;
df.to_csv(file_name, encoding = &#39;euc-kr&#39;, index =False)</code></pre>
</div>
<div id="nickel-data-1" class="section level2">
<h2><span class="header-section-number">3.3</span> Nickel Data</h2>
<p>Nickel data can be directly saved from KORES(Korea Resource Corporation) web.
Below is the link for the nickel data.</p>
<p>(<a href="https://www.kores.net/komis/price/mineralprice/basemetals/pricetrend/baseMetals.do" class="uri">https://www.kores.net/komis/price/mineralprice/basemetals/pricetrend/baseMetals.do</a>)</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/opszzq/Exploratory-Analysis-on-Steel-Company-Data/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/opszzq/Exploratory-Analysis-on-Steel-Company-Data/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
